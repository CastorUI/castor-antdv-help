import{l as W,n as ie,k as C,d as B,S as i,U as f,ac as w,m as z,A as V,Y as y,Z as E,G as F,X as b,ah as c,u as A,F as P,$ as I,aj as U,_ as S,W as pe,ab as he,ae as se,f as ue,o as me,c as N,a4 as h,B as Pe,aJ as Be}from"./framework.B0zGB0ni.js";import{g as ke,P as we,B as O,a as Se,b as Fe,S as ce,D as Ae,R as ye,c as fe,d as ge,I as ve,F as q,e as M,A as Ie,f as je,C as Te,h as Ne,i as Oe,j as Je,k as Re,U as xe,l as Ke,s as Ue}from"./theme.COLHXblF.js";var _=[],x=[],ze="insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).";function Ve(){var e=document.createElement("style");return e.setAttribute("type","text/css"),e}function Ye(e,a){if(a=a||{},e===void 0)throw new Error(ze);var l=a.prepend===!0?"prepend":"append",t=a.container!==void 0?a.container:document.querySelector("head"),n=_.indexOf(t);n===-1&&(n=_.push(t)-1,x[n]={});var o;return x[n]!==void 0&&x[n][l]!==void 0?o=x[n][l]:(o=x[n][l]=Ve(),l==="prepend"?t.insertBefore(o,t.childNodes[0]):t.appendChild(o)),e.charCodeAt(0)===65279&&(e=e.substr(1,e.length)),o.styleSheet?o.styleSheet.cssText+=e:o.textContent+=e,o}function ee(e){for(var a=1;a<arguments.length;a++){var l=arguments[a]!=null?Object(arguments[a]):{},t=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(t=t.concat(Object.getOwnPropertySymbols(l).filter(function(n){return Object.getOwnPropertyDescriptor(l,n).enumerable}))),t.forEach(function(n){De(e,n,l[n])})}return e}function De(e,a,l){return a in e?Object.defineProperty(e,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[a]=l,e}function te(e){return typeof e=="object"&&typeof e.name=="string"&&typeof e.theme=="string"&&(typeof e.icon=="object"||typeof e.icon=="function")}function H(e,a,l){return l?W(e.tag,ee({key:a},l,e.attrs),(e.children||[]).map(function(t,n){return H(t,"".concat(a,"-").concat(e.tag,"-").concat(n))})):W(e.tag,ee({key:a},e.attrs),(e.children||[]).map(function(t,n){return H(t,"".concat(a,"-").concat(e.tag,"-").concat(n))}))}function be(e){return ke(e)[0]}function Ee(e){return e?Array.isArray(e)?e:[e]:[]}var Me=`
.anticon {
  display: inline-block;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,ae=!1,Le=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Me;ie(function(){ae||(typeof window<"u"&&window.document&&window.document.documentElement&&Ye(a,{prepend:!0}),ae=!0)})},He=["icon","primaryColor","secondaryColor"];function Ge(e,a){if(e==null)return{};var l=Ze(e,a),t,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)t=o[n],!(a.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}function Ze(e,a){if(e==null)return{};var l={},t=Object.keys(e),n,o;for(o=0;o<t.length;o++)n=t[o],!(a.indexOf(n)>=0)&&(l[n]=e[n]);return l}function D(e){for(var a=1;a<arguments.length;a++){var l=arguments[a]!=null?Object(arguments[a]):{},t=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(t=t.concat(Object.getOwnPropertySymbols(l).filter(function(n){return Object.getOwnPropertyDescriptor(l,n).enumerable}))),t.forEach(function(n){qe(e,n,l[n])})}return e}function qe(e,a,l){return a in e?Object.defineProperty(e,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[a]=l,e}var K={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function Xe(e){var a=e.primaryColor,l=e.secondaryColor;K.primaryColor=a,K.secondaryColor=l||be(a),K.calculated=!!l}function $e(){return D({},K)}var j=function(a,l){var t=D({},a,l.attrs),n=t.icon,o=t.primaryColor,s=t.secondaryColor,r=Ge(t,He),u=K;if(o&&(u={primaryColor:o,secondaryColor:s||be(o)}),Le(),te(n),!te(n))return null;var v=n;return v&&typeof v.icon=="function"&&(v=D({},v,{icon:v.icon(u.primaryColor,u.secondaryColor)})),H(v.icon,"svg-".concat(v.name),D({},r,{"data-icon":v.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"}))};j.props={icon:Object,primaryColor:String,secondaryColor:String,focusable:String};j.inheritAttrs=!1;j.displayName="IconBase";j.getTwoToneColors=$e;j.setTwoToneColors=Xe;function We(e,a){return at(e)||tt(e,a)||et(e,a)||_e()}function _e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function et(e,a){if(e){if(typeof e=="string")return le(e,a);var l=Object.prototype.toString.call(e).slice(8,-1);if(l==="Object"&&e.constructor&&(l=e.constructor.name),l==="Map"||l==="Set")return Array.from(e);if(l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return le(e,a)}}function le(e,a){(a==null||a>e.length)&&(a=e.length);for(var l=0,t=new Array(a);l<a;l++)t[l]=e[l];return t}function tt(e,a){var l=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(l!=null){var t=[],n=!0,o=!1,s,r;try{for(l=l.call(e);!(n=(s=l.next()).done)&&(t.push(s.value),!(a&&t.length===a));n=!0);}catch(u){o=!0,r=u}finally{try{!n&&l.return!=null&&l.return()}finally{if(o)throw r}}return t}}function at(e){if(Array.isArray(e))return e}function Qe(e){var a=Ee(e),l=We(a,2),t=l[0],n=l[1];return j.setTwoToneColors({primaryColor:t,secondaryColor:n})}function lt(){var e=j.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor}var nt=["class","icon","spin","rotate","tabindex","twoToneColor","onClick"];function ot(e,a){return st(e)||it(e,a)||dt(e,a)||rt()}function rt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dt(e,a){if(e){if(typeof e=="string")return ne(e,a);var l=Object.prototype.toString.call(e).slice(8,-1);if(l==="Object"&&e.constructor&&(l=e.constructor.name),l==="Map"||l==="Set")return Array.from(e);if(l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return ne(e,a)}}function ne(e,a){(a==null||a>e.length)&&(a=e.length);for(var l=0,t=new Array(a);l<a;l++)t[l]=e[l];return t}function it(e,a){var l=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(l!=null){var t=[],n=!0,o=!1,s,r;try{for(l=l.call(e);!(n=(s=l.next()).done)&&(t.push(s.value),!(a&&t.length===a));n=!0);}catch(u){o=!0,r=u}finally{try{!n&&l.return!=null&&l.return()}finally{if(o)throw r}}return t}}function st(e){if(Array.isArray(e))return e}function oe(e){for(var a=1;a<arguments.length;a++){var l=arguments[a]!=null?Object(arguments[a]):{},t=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(t=t.concat(Object.getOwnPropertySymbols(l).filter(function(n){return Object.getOwnPropertyDescriptor(l,n).enumerable}))),t.forEach(function(n){G(e,n,l[n])})}return e}function G(e,a,l){return a in e?Object.defineProperty(e,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[a]=l,e}function ut(e,a){if(e==null)return{};var l=mt(e,a),t,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)t=o[n],!(a.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}function mt(e,a){if(e==null)return{};var l={},t=Object.keys(e),n,o;for(o=0;o<t.length;o++)n=t[o],!(a.indexOf(n)>=0)&&(l[n]=e[n]);return l}Qe("#1890ff");var R=function(a,l){var t,n=oe({},a,l.attrs),o=n.class,s=n.icon,r=n.spin,u=n.rotate,v=n.tabindex,k=n.twoToneColor,m=n.onClick,g=ut(n,nt),d=(t={anticon:!0},G(t,"anticon-".concat(s.name),!!s.name),G(t,o,o),t),Q=r===""||r||s.name==="loading"?"anticon-spin":"",p=v;p===void 0&&m&&(p=-1,g.tabindex=p);var J=u?{msTransform:"rotate(".concat(u,"deg)"),transform:"rotate(".concat(u,"deg)")}:void 0,T=Ee(k),Y=ot(T,2),L=Y[0],Ce=Y[1];return C("span",oe({role:"img","aria-label":s.name},g,{onClick:m,class:d}),[C(j,{class:Q,icon:s,primaryColor:L,secondaryColor:Ce,style:J},null)])};R.props={spin:Boolean,rotate:Number,icon:Object,twoToneColor:String};R.displayName="AntdIcon";R.inheritAttrs=!1;R.getTwoToneColor=lt;R.setTwoToneColor=Qe;function re(e){for(var a=1;a<arguments.length;a++){var l=arguments[a]!=null?Object(arguments[a]):{},t=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(t=t.concat(Object.getOwnPropertySymbols(l).filter(function(n){return Object.getOwnPropertyDescriptor(l,n).enumerable}))),t.forEach(function(n){ct(e,n,l[n])})}return e}function ct(e,a,l){return a in e?Object.defineProperty(e,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[a]=l,e}var X=function(a,l){var t=re({},a,l.attrs);return C(R,re({},t,{icon:we}),null)};X.displayName="PlusOutlined";X.inheritAttrs=!1;const At={loading:{type:Boolean,default:!1},title:{type:String,default:""},rowKey:{type:String,default:"id"},dataSource:{type:Array,default:()=>[]},columns:{type:Array,default(){return[]}},pagination:{type:[Object,Boolean]},addCommand:{type:Object,default:()=>{}},customCommands:{type:Array,default:()=>[]},settingCommands:{type:Array,default:()=>[]},getList:{type:Function},customComponents:{type:Object,default:()=>{}},tableTag:{type:String,default:""},emitRegister:{type:Object,default:()=>{}},elementProps:{type:Object,default:()=>{}},extendProps:{type:Object,default:()=>({cacheConfigColumns:!0,showRefresh:!0,showColumnConfig:!0})}},yt=B({__name:"CommandColumn",props:{commands:{type:Array,default:()=>[]},handleEmit:{type:Function,default:()=>{}},record:{type:Object,default:()=>{}},index:{type:Number,default:0}},setup(e){return(a,l)=>(i(!0),f(P,null,w(e.commands,(t,n)=>z((i(),y(A(O),c({key:n,class:"command",type:"link",disabled:t.disableValidator&&t.disableValidator({row:e.record,item:t}),ref_for:!0},t.elementProps,{onClick:o=>e.handleEmit(t.command,{row:e.record,index:e.index,item:t})}),{default:E(()=>[F(b(t.text),1)]),_:2},1040,["disabled","onClick"])),[[V,!t.visibleValidator||t.visibleValidator({row:e.record,item:t})]])),128))}}),ft=I(yt,[["__scopeId","data-v-1d25ca4e"]]),gt=B({__name:"StatusColumn",props:{options:{type:Array,default:()=>[]},dataField:{type:String,default:""},record:{type:Object,default:()=>{}}},setup(e){return(a,l)=>e.options.some(t=>t.value===e.record[e.dataField])?(i(),f("span",{key:0,style:U({color:e.options.filter(t=>t.value===e.record[e.dataField])[0].color})},b(e.options.filter(t=>t.value===e.record[e.dataField])[0].label),5)):S("",!0)}}),vt=I(gt,[["__scopeId","data-v-e5985d91"]]),bt=B({__name:"LinkColumn",props:{command:{type:String,default:""},dataField:{type:String,default:""},handleEmit:{type:Function,default:()=>{}},record:{type:Object,default:()=>{}},index:{type:Number,default:0},elementProps:{type:Object,default:()=>{}}},setup(e){return(a,l)=>(i(),y(A(O),{class:pe([e.elementProps.ellipsis?"nowrap-link":"wrap-link","link-class"]),type:"link",onClick:l[0]||(l[0]=t=>e.handleEmit(e.command,{row:e.record,index:e.index}))},{default:E(()=>[F(b(e.record[e.dataField]),1)]),_:1},8,["class"]))}}),Et=I(bt,[["__scopeId","data-v-a7ce965a"]]),Qt=B({__name:"ImageColumn",props:{dataField:{type:String,default:""},record:{type:Object,default:()=>{}},elementProps:{type:Object,default:()=>({width:50,height:50})}},setup(e){return(a,l)=>{const t=he("a-image");return i(),y(t,c({src:e.record[e.dataField],fallback:"data:image/png;base64,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"},e.elementProps),null,16,["src"])}}}),Ct=I(Qt,[["__scopeId","data-v-fb6c7478"]]),pt=B({__name:"ComponentColumn",props:{customComponents:{type:Object,default:()=>{}},componentKey:{type:String,default:""},dataField:{type:String,default:""},record:{type:Object,default:()=>{}},handleEmit:{type:Function,default:()=>{}}},setup(e){return(a,l)=>(i(),y(se(e.customComponents[e.componentKey]),{"v-model:component-data":e.record[e.dataField],model:e.record,dataField:e.dataField,handleEmit:e.handleEmit},null,8,["v-model:component-data","model","dataField","handleEmit"]))}}),ht=I(pt,[["__scopeId","data-v-93f9f894"]]),$=(e,a,l={})=>{if(Object.keys(e).length===0){console.error("emitRegister中未注册任何事件");return}if(!a){console.error("事件名不能为空");return}const t=e[a];if(!t){console.error(`当前事件【${a}】未在emitRegister中注册`);return}Object.keys(l).length>0?t(l):t()},Pt={key:0,class:"table-append-header"},Bt={class:"table-title"},kt={class:"table-commands"},wt={inheritAttrs:!1},St=B({...wt,__name:"common-table",props:At,setup(e){let a=ue();me(()=>{a.value={getContainer:()=>document.getElementById("comTable")}});const l=e,t=(o,s)=>{$(l.emitRegister,o,s)},n=N(()=>l.columns.map(o=>{switch(o.type){case"index":return{title:o.label,customRender:({index:s})=>{const r=l.pagination||!1;return r===!1?`${s+1}`:`${((r.current||1)-1)*(r.pageSize||10)+s+1}`},align:"center",...o.elementProps};case"link":return{title:o.label,customRender:({record:s,index:r})=>C(Et,{command:(o.extendProps||{}).linkCommand,dataField:o.dataField,handleEmit:t,record:s,index:r,elementProps:o.elementProps},null),...o.elementProps};case"image":return{title:o.label,customRender:({record:s,index:r})=>{var u;return C(Ct,{dataField:o.dataField,record:s,index:r,elementProps:(u=o.extendProps)==null?void 0:u.subElementProps},null)},...o.elementProps};case"custom":return{title:o.label,customRender:({record:s})=>C(ht,{customComponents:l.customComponents,componentKey:(o.extendProps||{}).componentKey,dataField:o.dataField,record:s,handleEmit:t},null),...o.elementProps};case"commands":return{title:o.label,customRender:({record:s,index:r})=>C(ft,{commands:(o.extendProps||{}).commands,handleEmit:t,record:s,index:r},null),...o.elementProps};case"status":return{title:o.label,customRender:({record:s})=>C(vt,{options:(o.extendProps||{}).options,record:s,dataField:o.dataField},null),...o.elementProps};default:return{title:o.label,dataIndex:o.dataField,...o.elementProps}}}));return(o,s)=>(i(),f(P,null,[o.title||o.addCommand||o.customCommands&&o.customCommands.length?(i(),f("div",Pt,[h("div",Bt,b(o.title||""),1),h("div",kt,[o.addCommand&&o.addCommand.text&&(!o.addCommand.visibleValidator||o.addCommand.visibleValidator())?(i(),y(A(O),c({key:0,type:"primary",disabled:o.addCommand.disableValidator&&o.addCommand.disableValidator()},o.addCommand.elementProps,{onClick:s[0]||(s[0]=r=>t(o.addCommand.command))}),{icon:E(()=>[C(A(X))]),default:E(()=>[F(" "+b(o.addCommand.text),1)]),_:1},16,["disabled"])):S("",!0),o.customCommands&&o.customCommands.length?(i(),y(A(Se),{key:1,class:"table-custom-commands"},{default:E(()=>[(i(!0),f(P,null,w(o.customCommands,(r,u)=>z((i(),y(A(O),c({key:u,disabled:r.disableValidator&&r.disableValidator(),ref_for:!0},r.elementProps,{onClick:v=>t(r.command)}),{default:E(()=>[F(b(r.text),1)]),_:2},1040,["disabled","onClick"])),[[V,!r.visibleValidator||r.visibleValidator()]])),128))]),_:1})):S("",!0)])])):S("",!0),C(A(Fe),c({"row-key":o.rowKey,loading:o.loading,dataSource:o.dataSource,columns:n.value,scroll:{x:"100%"},pagination:o.pagination===!1?!1:{showSizeChanger:!0,showTotal:r=>`共 ${r} 条`,...o.pagination}},o.elementProps,{sticky:A(a)}),null,16,["row-key","loading","dataSource","columns","pagination","sticky"])],64))}}),Ft=I(St,[["__scopeId","data-v-971c774b"]]),It=B({__name:"QueryCtrl",props:{type:{type:String,default:void 0},label:{type:String,default:void 0},defaultModel:{type:Object,default:()=>{}},dataField:{type:String,default:""},width:{type:String,default:void 0},disableValidator:{type:Function,default:void 0},visibleValidator:{type:Function,default:()=>!0},elementProps:{type:Object,default(){return{valueFormat:"yyyy-MM-dd"}}},extendProps:{type:Object,default:()=>({})}},emits:["enterKeyDown"],setup(e,{emit:a}){const l=e,t=a,n=N(()=>l.defaultModel),o=()=>{t("enterKeyDown")};return(s,r)=>!e.visibleValidator||e.visibleValidator({model:n.value})?(i(),y(A(q),c({key:0,label:e.label,name:e.dataField},e.extendProps.formItemProps),{default:E(()=>[e.type==="select"?(i(),y(A(ce),c({key:0,value:n.value[e.dataField],"onUpdate:value":r[0]||(r[0]=u=>n.value[e.dataField]=u),placeholder:"请选择",disabled:e.disableValidator&&e.disableValidator({model:n.value}),"allow-clear":!0},e.elementProps),null,16,["value","disabled"])):e.type==="date"?(i(),y(A(Ae),c({key:1,value:n.value[e.dataField],"onUpdate:value":r[1]||(r[1]=u=>n.value[e.dataField]=u),placeholder:"请选择",disabled:e.disableValidator&&e.disableValidator({model:n.value}),"allow-clear":!0},e.elementProps),null,16,["value","disabled"])):e.type==="dateRange"?(i(),y(A(ye),c({key:2,value:n.value[e.dataField],"onUpdate:value":r[2]||(r[2]=u=>n.value[e.dataField]=u),disabled:e.disableValidator&&e.disableValidator({model:n.value}),"allow-clear":!0},e.elementProps),null,16,["value","disabled"])):e.type==="time"?(i(),y(A(fe),c({key:3,value:n.value[e.dataField],"onUpdate:value":r[3]||(r[3]=u=>n.value[e.dataField]=u),placeholder:"请选择",disabled:e.disableValidator&&e.disableValidator({model:n.value}),"allow-clear":!0},e.elementProps),null,16,["value","disabled"])):e.type==="timeRange"?(i(),y(A(ge),c({key:4,value:n.value[e.dataField],"onUpdate:value":r[4]||(r[4]=u=>n.value[e.dataField]=u),disabled:e.disableValidator&&e.disableValidator({model:n.value}),"allow-clear":!0},e.elementProps),null,16,["value","disabled"])):(i(),y(A(ve),c({key:5,value:n.value[e.dataField],"onUpdate:value":r[5]||(r[5]=u=>n.value[e.dataField]=u),placeholder:"请输入",disabled:e.disableValidator&&e.disableValidator({model:n.value})},e.elementProps,{onPressEnter:o}),null,16,["value","disabled"]))]),_:1},16,["label","name"])):S("",!0)}}),jt={formId:{type:String,default:"queryForm"},loading:{type:Boolean,default:!1},model:{type:Object,default:()=>{}},fields:{type:Array,default:()=>[]},commands:{type:Array,default:()=>[]},downloadOpt:{type:Object,default:()=>{}},dynamicFieldsPosition:{type:String,default:"end"},maxFieldWidth:{type:Number,default:230},commandsFloat:{type:String,default:"right"},defaultCheckedKeys:{type:Array,default:()=>[]},emitRegister:{type:Object,default:()=>{}},elementProps:{type:Object,default:()=>{}}},Tt={inheritAttrs:!1},Nt=B({...Tt,__name:"common-query",props:jt,setup(e){const a=e,{resetFields:l}=M.useForm(a.model,void 0),t=N(()=>a.emitRegister);t.value.resetFields=l;const n=(s,r)=>{$(a.emitRegister,s,r)},o=()=>{a.commands.filter(r=>r.canKeyDown).map(r=>{n(r.command)})};return(s,r)=>(i(),y(A(M),c({ref:"formRef",model:s.model,layout:"inline"},s.elementProps),{default:E(()=>[(i(!0),f(P,null,w(s.fields,(u,v)=>(i(),y(It,c({key:v,"default-model":s.model,ref_for:!0},u,{onEnterKeyDown:o}),null,16,["default-model"]))),128)),C(A(q),null,{default:E(()=>[(i(!0),f(P,null,w(s.commands,(u,v)=>z((i(),y(A(O),c({key:v,class:"command",disabled:u.disableValidator&&u.disableValidator(),ref_for:!0},u.elementProps,{onClick:k=>n(u.command)}),{default:E(()=>[F(b(u.text),1)]),_:2},1040,["disabled","onClick"])),[[V,!u.visibleValidator||u.visibleValidator()]])),128))]),_:1})]),_:1},16,["model"]))}}),Ot=I(Nt,[["__scopeId","data-v-1e8fdc23"]]),Jt={style:{float:"left"}},Rt={style:{"margin-left":"36px","font-size":"14px",color:"#999","font-weight":"normal"}},xt={key:0,style:{float:"right"}},Kt={class:"ant-upload-wrapper"},Ut=["src"],zt="data:image/png;base64,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",de=B({__name:"FormCtrl",props:{type:{type:String,default:"default"},label:{type:String,default:void 0},layout:{type:String,default:"horizontal"},operateType:{type:String,default:"add"},defaultModel:{type:Object,default:()=>{}},dataField:{type:String,default:""},rules:{type:Array,default:()=>null},width:{type:String,default:void 0},disableValidator:{type:Function,default:void 0},visibleValidator:{type:Function,default:()=>!0},customComponents:{type:Object,default:()=>{}},elementProps:{type:Object,default:()=>{}},extendProps:{type:Object,default:()=>{}},handleEmit:{type:Function,default:()=>{}},validateInfos:{type:Object,default:()=>{}},validate:{type:Function,default:void 0}},emits:["blur"],setup(e,{emit:a}){const l=e,t=N(()=>l.defaultModel),n=N(()=>l.operateType==="view"||l.disableValidator&&l.disableValidator({model:l.defaultModel,operateType:l.operateType})),o=s=>{console.log("FormCtrl handleBlur for field:",s),l.validate?(console.log("validate function exists"),l.validate(s,{trigger:"blur"}).catch(()=>{})):console.log("validate function does not exist")};return(s,r)=>{var u;return e.type==="space"?(i(),f("div",{key:0,class:"form-item-space",style:U({float:"left",width:"calc(100% + 28px)",height:"12px",margin:"0 -16px 0 -12px",background:"#f0f2f5",...e.elementProps.style})},null,4)):!e.visibleValidator||e.visibleValidator({model:t.value,operateType:e.operateType})?(i(),y(A(q),c({key:1,label:e.label,name:e.dataField,rules:e.rules},{...e.extendProps.formItemProps,...e.validateInfos[e.dataField]},{style:{float:"left",width:`calc(${e.width} - ${e.layout==="vertical"?"16px":"0px"})`,marginLeft:`${e.layout==="vertical"?"8px":"0"}`,marginRight:`${e.layout==="vertical"?"8px":"0"}`,marginBottom:["groupTitle","custom","space"].includes(e.type)||(u=e.validateInfos[e.dataField])!=null&&u.help?"0":"inherit",...e.extendProps.formItemStyle}}),{default:E(()=>{var v,k,m,g;return[["default","inputNumber","date","textArea","select","radioGroup","switch","checkboxGroup"].includes(e.type)&&e.operateType==="view"?(i(),f(P,{key:0},[["select","radioGroup"].includes(e.type)?(i(),f("span",c({key:0},e.elementProps,{style:{width:"100%",whiteSpace:"pre-line",...e.elementProps.style}}),b(((e.elementProps.options||[]).filter(d=>d.value===t.value[e.dataField])[0]||{}).label||"暂无"),17)):["switch"].includes(e.type)?(i(),f("span",c({key:1},e.elementProps,{style:{width:"100%",whiteSpace:"pre-line",...e.elementProps.style}}),b(t.value[e.dataField]===null||t.value[e.dataField]===void 0?"暂无":t.value[e.dataField]?"是":"否"),17)):["checkboxGroup"].includes(e.type)?(i(),f("span",c({key:2},e.elementProps,{style:{width:"100%",whiteSpace:"pre-line",...e.elementProps.style}}),b(((e.elementProps.options||[]).filter(d=>t.value[e.dataField].includes(d.value))||[]).map(d=>d.label).join(" , ")||"暂无"),17)):(i(),f("span",c({key:3},e.elementProps,{style:{width:"100%",whiteSpace:"pre-line",...e.elementProps.style}}),b(`${t.value[e.dataField]||((v=e.elementProps)!=null&&v.suffix?" - ":"暂无")}${((k=e.elementProps)==null?void 0:k.suffix)||""}`),17))],64)):e.type==="select"?(i(),y(A(ce),c({key:1,value:t.value[e.dataField],"onUpdate:value":r[0]||(r[0]=d=>t.value[e.dataField]=d),placeholder:"请选择",disabled:n.value},e.elementProps,{style:{width:"100%",...e.elementProps.style}}),null,16,["value","disabled","style"])):e.type==="autocomplete"?(i(),y(A(Ie),c({key:2,value:t.value[e.dataField],"onUpdate:value":r[1]||(r[1]=d=>t.value[e.dataField]=d),placeholder:"请选择",disabled:n.value},e.elementProps,{style:{width:"100%",...e.elementProps.style}}),null,16,["value","disabled","style"])):e.type==="date"?(i(),y(A(Ae),c({key:3,value:t.value[e.dataField],"onUpdate:value":r[2]||(r[2]=d=>t.value[e.dataField]=d),placeholder:"请选择",disabled:n.value},e.elementProps,{style:{width:"100%",...e.elementProps.style}}),null,16,["value","disabled","style"])):e.type==="dateRange"?(i(),y(A(ye),c({key:4,value:t.value[e.dataField],"onUpdate:value":r[3]||(r[3]=d=>t.value[e.dataField]=d),disabled:n.value},e.elementProps,{style:{width:"100%",...e.elementProps.style}}),null,16,["value","disabled","style"])):e.type==="time"?(i(),y(A(fe),c({key:5,value:t.value[e.dataField],"onUpdate:value":r[4]||(r[4]=d=>t.value[e.dataField]=d),placeholder:"请选择",disabled:n.value},e.elementProps,{style:{width:"100%",...e.elementProps.style}}),null,16,["value","disabled","style"])):e.type==="timeRange"?(i(),y(A(ge),c({key:6,value:t.value[e.dataField],"onUpdate:value":r[5]||(r[5]=d=>t.value[e.dataField]=d),disabled:n.value},e.elementProps,{style:{width:"100%",...e.elementProps.style}}),null,16,["value","disabled","style"])):e.type==="text"?(i(),f("span",c({key:7},e.elementProps,{style:{width:"100%",whiteSpace:"pre-line",...e.elementProps.style}}),b(`${t.value[e.dataField]||((m=e.elementProps)!=null&&m.suffix?" - ":"暂无")}${((g=e.elementProps)==null?void 0:g.suffix)||""}`),17)):e.type==="textArea"?(i(),y(A(je),c({key:8,value:t.value[e.dataField],"onUpdate:value":r[6]||(r[6]=d=>t.value[e.dataField]=d),disabled:n.value,placeholder:"请输入"},e.elementProps,{style:{width:"100%",...e.elementProps.style}}),null,16,["value","disabled","style"])):e.type==="groupTitle"?(i(),f("div",c({key:9},e.elementProps,{style:{overflow:"hidden",width:"100%",fontSize:"16px",fontWeight:"bold",...e.elementProps.style}}),[h("div",Jt,[F(b(e.extendProps.groupTitle)+" ",1),h("span",Rt,b(e.extendProps.subTitle),1)]),e.extendProps.groupCommands?(i(),f("div",xt,[(i(!0),f(P,null,w(e.extendProps.groupCommands,(d,Q)=>z((i(),y(A(O),c({key:Q,type:"link",disabled:d.disableValidator&&d.disableValidator({model:t.value,operateType:e.operateType}),ref_for:!0},d.elementProps,{onClick:Pe(p=>e.handleEmit(d.command),["stop"])}),{default:E(()=>[F(b(d.text),1)]),_:2},1040,["disabled","onClick"])),[[V,!d.visibleValidator||d.visibleValidator({model:t.value,operateType:e.operateType})]])),128))])):S("",!0)],16)):e.type==="checkboxGroup"?(i(),y(A(Te),c({key:10,value:t.value[e.dataField],"onUpdate:value":r[7]||(r[7]=d=>t.value[e.dataField]=d),disabled:n.value},e.elementProps,{style:{width:"100%",...e.elementProps.style}}),null,16,["value","disabled","style"])):e.type==="radioGroup"?(i(),y(A(Ne),c({key:11,value:t.value[e.dataField],"onUpdate:value":r[8]||(r[8]=d=>t.value[e.dataField]=d),disabled:n.value},e.elementProps,{style:{width:"100%",...e.elementProps.style}}),null,16,["value","disabled","style"])):e.type==="custom"&&e.extendProps.componentKey?(i(),y(se(e.customComponents[e.extendProps.componentKey]),c({key:12,"component-data":t.value[e.dataField],"onUpdate:componentData":r[9]||(r[9]=d=>t.value[e.dataField]=d),model:t.value,"operate-type":e.operateType},e.elementProps),null,16,["component-data","model","operate-type"])):e.type==="status"?(i(),f("span",c({key:13},e.elementProps,{style:{width:"100%",...e.elementProps.style,color:((e.extendProps.statusOptions||[]).filter(d=>d.value===t.value[e.dataField])[0]||{}).color}}),b(((e.extendProps.statusOptions||[]).filter(d=>d.value===t.value[e.dataField])[0]||{}).label),17)):e.type==="inputNumber"?(i(),y(A(Oe),c({key:14,value:t.value[e.dataField],"onUpdate:value":r[10]||(r[10]=d=>t.value[e.dataField]=d),disabled:n.value,placeholder:"请输入"},e.elementProps,{style:{width:"100%",...e.elementProps.style}}),null,16,["value","disabled","style"])):e.type==="switch"?(i(),y(A(Je),c({key:15,checked:t.value[e.dataField],"onUpdate:checked":r[11]||(r[11]=d=>t.value[e.dataField]=d),disabled:n.value},e.elementProps,{style:e.elementProps.style}),null,16,["checked","disabled","style"])):e.type==="image"?(i(),y(A(Re),{key:16,placement:"bottom",title:n.value?"":"点击上传图片"},{default:E(()=>[C(A(xe),c({showUploadList:!1,disabled:n.value},e.elementProps),{default:E(()=>{var d,Q,p,J,T;return[h("div",Kt,[h("img",{src:t.value[e.dataField]||zt,style:U({width:((Q=(d=e.extendProps)==null?void 0:d.imageOptions)==null?void 0:Q.width)||"100px",height:((p=e.extendProps.imageOptions)==null?void 0:p.height)||"100px",borderRadius:((J=e.extendProps.imageOptions)==null?void 0:J.radius)||"50%",objectFit:"cover",cursor:n.value?"default":"pointer",...(T=e.extendProps.imageOptions)==null?void 0:T.style})},null,12,Ut)])]}),_:1},16,["disabled"])]),_:1},8,["title"])):(i(),y(A(ve),c({key:17,value:t.value[e.dataField],"onUpdate:value":r[12]||(r[12]=d=>t.value[e.dataField]=d),disabled:e.operateType==="view"||e.disableValidator&&e.disableValidator({model:t.value,operateType:e.operateType}),placeholder:"请输入"},e.elementProps,{style:{width:"100%",...e.elementProps.style},onBlur:r[13]||(r[13]=()=>o(e.dataField))}),Be({_:2},[e.extendProps&&e.extendProps.beforeText?{name:"addonBefore",fn:E(()=>[h("span",null,b(e.extendProps.beforeText),1)]),key:"0"}:void 0]),1040,["value","disabled","style"]))]}),_:1},16,["label","name","rules","style"])):S("",!0)}}}),Vt={loading:{type:Boolean,default:!1},model:{type:Object,default:()=>{}},fields:{type:Array,default:()=>[]},commands:{type:Array,default:()=>[]},customCommands:{type:Array,default:()=>[]},rowFieldsCount:{type:Number,default:2},rowHeight:{type:Number,default:36},operateType:{type:String,default:"add"},customComponents:{type:Object,default:()=>{}},elementProps:{type:Object,default:()=>{}},extendProps:{type:Object,default:()=>{}},emitRegister:{type:Object,default:()=>{}},customValidators:{type:Array,default:()=>[]}},Yt={id:"common-form",style:{overflow:"hidden"}},Dt={class:"status",style:{overflow:"hidden"}},Mt={class:"commands"},Lt={inheritAttrs:!1},Ht=B({...Lt,__name:"common-form",props:Vt,setup(e){const a=e,l=N(()=>{if(a.elementProps.rules)return a.elementProps.rules;{const m={};return a.fields.forEach(g=>{g.rules&&(!g.visibleValidator||g.visibleValidator({model:a.model,operateType:a.operateType}))&&(m[g.dataField]=g.rules)}),m}}),{resetFields:t,validate:n,clearValidate:o,validateInfos:s}=M.useForm(a.model,l),r=ue(),u=N(()=>a.emitRegister);var v=function(g){const d=`form_item_${g}`,Q=document.querySelector("#common-form"),p=Q==null?void 0:Q.querySelector(`#${d}`);p&&Ue(p,{behavior:J=>J.forEach(({el:T,top:Y,left:L})=>{T.scrollTop=Y-30,T.scrollLeft=L}),scrollMode:"if-needed",block:"start"})};ie(()=>{var m,g;u.value.scrollToField=(m=r==null?void 0:r.value)==null?void 0:m.scrollToField,u.value.handleFinishFailed=(g=r==null?void 0:r.value)==null?void 0:g.handleFinishFailed}),u.value.validate=()=>new Promise((m,g)=>{try{n().then(()=>{m(!0)})}catch(d){v(d.errorFields[0].name),g(!1)}}),u.value.clearValidate=o,u.value.resetFields=t,me(()=>{var m;u.value.validateFields=(m=r==null?void 0:r.value)==null?void 0:m.validateFields});const k=(m,g)=>{$(a.emitRegister,m,g)};return(m,g)=>(i(),f(P,null,[h("div",{class:"content",style:U((m.extendProps||{}).contentStyle)},[C(A(Ke),{spinning:m.loading},{default:E(()=>[h("div",Yt,[C(A(M),c({ref_key:"formRef",ref:r,model:m.model},m.elementProps,{class:"common-form-container",style:{padding:"0 16px 0 12px",...m.elementProps.style},scrollToFirstError:!0}),{default:E(()=>[(i(!0),f(P,null,w(m.fields.filter(d=>(d.extendProps||{}).showInFooter!==!0),(d,Q)=>(i(),y(de,c({key:Q,"operate-type":m.operateType,"default-model":m.model,width:100/m.rowFieldsCount*(d.columnSpan||1)+"%",layout:m.elementProps.layout||"horizontal",customComponents:m.customComponents,handleEmit:k,validateInfos:A(s),validate:A(n),ref_for:!0},d,{"element-props":d.elementProps||{},"extend-props":d.extendProps||{}}),null,16,["operate-type","default-model","width","layout","customComponents","validateInfos","validate","element-props","extend-props"]))),128))]),_:1},16,["model","style"])])]),_:1},8,["spinning"])],4),m.commands&&m.commands.length&&m.commands.some(d=>!d.visibleValidator||d.visibleValidator({model:m.model,operateType:m.operateType}))?(i(),f("div",{key:0,class:"footer",style:U({background:"white",...(m.extendProps||{}).footerStyle})},[h("div",Dt,[(i(!0),f(P,null,w(m.fields.filter(d=>(d.extendProps||{}).showInFooter===!0),(d,Q)=>(i(),y(de,c({key:Q,"operate-type":m.operateType,"default-model":m.model,width:100/m.rowFieldsCount*(d.columnSpan||1)+"%",layout:m.elementProps.layout||"horizontal",customComponents:m.customComponents,handleEmit:k,validateInfos:A(s),validate:A(n),ref_for:!0},d,{"element-props":d.elementProps||{},"extend-props":d.extendProps||{}}),null,16,["operate-type","default-model","width","layout","customComponents","validateInfos","validate","element-props","extend-props"]))),128))]),h("div",Mt,[(i(!0),f(P,null,w(m.commands,(d,Q)=>z((i(),y(A(O),c({key:Q,class:"command",loading:d.loading,disabled:d.disableValidator&&d.disableValidator.call({model:m.model,operateType:m.operateType}),ref_for:!0},d.elementProps,{onClick:p=>k(d.command,{command:d})}),{default:E(()=>[F(b(d.text),1)]),_:2},1040,["loading","disabled","onClick"])),[[V,!d.visibleValidator||d.visibleValidator({model:m.model,operateType:m.operateType})]])),128))])],4)):S("",!0)],64))}}),Gt=I(Ht,[["__scopeId","data-v-710b6b51"]]),Z={CaCommonTable:Ft,CaCommonQuery:Ot,CaCommonForm:Gt},Zt=e=>{Object.keys(Z).forEach(a=>{e.component(a,Z[a])})},$t={version:"1.0.0",install:Zt,...Z};export{Gt as CaCommonForm,Ot as CaCommonQuery,Ft as CaCommonTable,$t as default};
